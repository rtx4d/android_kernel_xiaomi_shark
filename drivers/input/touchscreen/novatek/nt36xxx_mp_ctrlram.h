/*
 * Copyright (C) 2010 - 2017 Novatek, Inc.
 *
 * $Revision: 14590 $
 * $Date: 2017-07-20 11:14:42 +0800 (Thu, 20 Jul 2017) $
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
 * more details.
 *
 */

#if NVT_TOUCH_MP

static uint32_t IC_X_CFG_SIZE = 18;
static uint32_t IC_Y_CFG_SIZE = 32;
static uint32_t IC_KEY_CFG_SIZE = 4;
static uint32_t X_Channel = 18;
static uint32_t Y_Channel = 32;
static uint32_t Key_Channel = TOUCH_KEY_NUM;
static uint8_t AIN_X[40] = {17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0};
static uint8_t AIN_Y[40] = {31, 30, 29, 28, 27, 26, 25, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0};
#if TOUCH_KEY_NUM > 0
static uint8_t AIN_KEY[8] = {0, 1, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF};
#endif /* #if TOUCH_KEY_NUM > 0 */

static int32_t PS_Config_Lmt_Short_Rawdata_P = 13500;
static int32_t PS_Config_Lmt_Short_Rawdata_N = 11500;
static int32_t PS_Config_Lmt_Key_Short_Rawdata_P = 13500;
static int32_t PS_Config_Lmt_Key_Short_Rawdata_N = 11500;
static int32_t PS_Config_Lmt_Short_Diff_P = 6300;
static int32_t PS_Config_Lmt_Short_Diff_N = 0;
static int32_t PS_Config_Lmt_Key_Short_Diff_P = 6300;
static int32_t PS_Config_Lmt_Key_Short_Diff_N = 0;
static int32_t PS_Config_Lmt_Short_Base_P = 2000;
static int32_t PS_Config_Lmt_Short_Base_N = -2000;
static int32_t PS_Config_Lmt_Key_Short_Base_P = 2000;
static int32_t PS_Config_Lmt_Key_Short_Base_N = -2000;

static int32_t PS_Config_Lmt_Open_Rawdata_P[40 * 40] = {
	7385,7410,7427,7441,7458,7476,7475,7442,7417,7391,7420,7439,7457,7466,7452,7423,7417,7405,
	7400,7438,7448,7466,7483,7508,7503,7469,7437,7414,7438,7460,7484,7489,7467,7451,7434,7419,
	7380,7411,7420,7437,7460,7481,7474,7437,7409,7382,7406,7429,7457,7455,7443,7413,7399,7382,
	7381,7422,7431,7453,7466,7494,7479,7444,7415,7385,7413,7429,7455,7458,7436,7414,7403,7378,
	7382,7413,7436,7456,7478,7495,7484,7448,7414,7377,7406,7423,7451,7452,7433,7408,7395,7363,
	7395,7425,7448,7465,7486,7505,7489,7455,7429,7410,7433,7457,7478,7476,7458,7433,7422,7389,
	7422,7452,7475,7500,7517,7533,7516,7485,7452,7404,7428,7446,7474,7472,7450,7425,7409,7377,
	7354,7389,7418,7433,7451,7478,7451,7419,7389,7408,7434,7451,7481,7471,7456,7425,7417,7380,
	7364,7396,7427,7450,7470,7488,7465,7429,7401,7396,7428,7448,7476,7461,7444,7422,7396,7357,
	7361,7397,7433,7452,7471,7495,7464,7427,7400,7408,7433,7452,7480,7470,7450,7422,7404,7366,
	7381,7419,7451,7480,7500,7524,7489,7453,7419,7423,7452,7476,7502,7481,7466,7436,7405,7373,
	7392,7433,7464,7493,7511,7528,7494,7464,7433,7434,7464,7484,7516,7494,7475,7439,7411,7382,
	7391,7424,7457,7494,7517,7542,7497,7462,7433,7423,7447,7476,7502,7481,7462,7422,7396,7358,
	7394,7431,7466,7499,7526,7546,7502,7462,7434,7452,7480,7500,7533,7507,7485,7447,7419,7386,
	7409,7448,7483,7519,7547,7565,7518,7489,7456,7472,7502,7526,7560,7524,7504,7456,7429,7392,
	7404,7446,7476,7517,7547,7561,7514,7481,7447,7451,7479,7500,7532,7504,7470,7431,7404,7367,
	7404,7447,7484,7517,7549,7573,7522,7489,7452,7469,7505,7526,7555,7519,7486,7444,7415,7375,
	7422,7462,7502,7536,7571,7603,7561,7528,7494,7517,7556,7579,7602,7545,7500,7469,7434,7397,
	7443,7486,7524,7559,7605,7625,7593,7556,7519,7532,7570,7598,7610,7559,7514,7471,7439,7400,
	7417,7460,7499,7536,7579,7607,7574,7532,7493,7526,7565,7589,7593,7540,7494,7455,7424,7386,
	7424,7470,7509,7547,7593,7612,7583,7546,7504,7544,7589,7618,7621,7564,7514,7469,7436,7394,
	7442,7488,7532,7570,7620,7639,7607,7569,7526,7537,7582,7598,7596,7541,7490,7447,7415,7375,
	7476,7522,7565,7607,7659,7671,7645,7607,7558,7597,7640,7671,7659,7598,7551,7508,7469,7422,
	7470,7521,7563,7607,7659,7674,7639,7606,7558,7602,7660,7673,7667,7601,7544,7499,7458,7415,
	7503,7552,7598,7645,7701,7714,7676,7650,7599,7622,7660,7685,7668,7605,7554,7505,7464,7413,
	7527,7585,7627,7682,7742,7747,7714,7685,7632,7682,7724,7744,7728,7659,7602,7554,7512,7458,
	7523,7579,7629,7678,7742,7743,7706,7679,7631,7735,7782,7809,7786,7707,7648,7591,7551,7493,
	7347,7389,7418,7448,7483,7480,7460,7444,7418,7456,7472,7479,7451,7403,7366,7335,7314,7276,
	7403,7446,7485,7519,7566,7558,7536,7523,7488,7546,7569,7580,7545,7494,7450,7417,7384,7339,
	7419,7471,7511,7555,7606,7599,7571,7556,7523,7639,7668,7683,7654,7584,7527,7486,7456,7403,
	7518,7574,7626,7674,7738,7733,7700,7679,7644,7700,7729,7756,7718,7644,7589,7536,7502,7442,
	7648,7724,7795,7865,7951,7956,7895,7860,7801,7890,7946,7978,7935,7838,7758,7693,7636,7558,
#if TOUCH_KEY_NUM > 0
	8009,7975,
#endif /* #if TOUCH_KEY_NUM > 0 */
};

static int32_t PS_Config_Lmt_Open_Rawdata_N[40 * 40] = {
	6857,6872,6881,6889,6900,6910,6909,6890,6875,6861,6878,6889,6899,6904,6896,6879,6875,6869,
	6866,6888,6894,6904,6913,6928,6925,6905,6887,6874,6888,6900,6914,6917,6905,6895,6886,6877,
	6854,6873,6878,6887,6900,6913,6908,6887,6871,6856,6870,6883,6899,6897,6891,6873,6865,6856,
	6855,6878,6883,6897,6904,6920,6911,6892,6875,6857,6873,6883,6897,6900,6886,6874,6867,6854,
	6856,6873,6886,6898,6911,6921,6914,6894,6874,6853,6870,6879,6895,6896,6885,6870,6863,6845,
	6863,6881,6894,6903,6916,6927,6917,6897,6883,6872,6885,6899,6911,6910,6900,6885,6878,6859,
	6878,6896,6909,6924,6933,6943,6932,6915,6896,6868,6882,6892,6908,6908,6894,6881,6871,6853,
	6840,6859,6876,6885,6895,6911,6895,6877,6859,6870,6886,6895,6913,6907,6898,6881,6875,6854,
	6846,6864,6881,6894,6906,6916,6903,6883,6867,6864,6882,6894,6910,6901,6892,6878,6864,6841,
	6843,6865,6885,6896,6907,6921,6902,6881,6866,6870,6885,6896,6912,6906,6894,6878,6868,6846,
	6855,6877,6895,6912,6924,6938,6917,6897,6877,6879,6896,6910,6924,6913,6904,6886,6869,6851,
	6862,6885,6902,6919,6929,6940,6920,6902,6885,6886,6902,6914,6932,6920,6909,6889,6873,6856,
	6861,6880,6899,6920,6933,6948,6921,6902,6885,6879,6893,6910,6924,6913,6902,6878,6864,6842,
	6862,6883,6904,6923,6938,6950,6924,6902,6886,6896,6912,6924,6943,6927,6915,6893,6877,6858,
	6871,6894,6913,6935,6951,6961,6934,6917,6898,6908,6924,6938,6958,6938,6926,6898,6883,6862,
	6868,6892,6910,6933,6951,6959,6932,6913,6893,6895,6911,6924,6942,6926,6906,6883,6868,6847,
	6868,6893,6914,6933,6951,6965,6936,6917,6896,6905,6927,6938,6955,6935,6916,6892,6875,6851,
	6878,6902,6924,6944,6965,6983,6959,6940,6920,6933,6956,6969,6982,6949,6924,6905,6886,6865,
	6891,6916,6938,6957,6984,6995,6977,6956,6935,6942,6964,6980,6986,6957,6932,6907,6889,6866,
	6875,6900,6923,6944,6969,6985,6966,6942,6919,6938,6961,6975,6977,6946,6920,6897,6880,6858,
	6880,6906,6929,6951,6977,6988,6971,6950,6926,6948,6975,6992,6993,6960,6932,6905,6886,6862,
	6890,6916,6942,6964,6992,7003,6985,6963,6938,6945,6970,6980,6978,6947,6918,6893,6875,6851,
	6910,6936,6961,6985,7015,7021,7007,6985,6956,6979,7004,7021,7015,6980,6953,6928,6905,6878,
	6906,6935,6959,6985,7015,7024,7003,6984,6956,6982,7016,7023,7019,6981,6948,6923,6900,6875,
	6925,6954,6980,7007,7039,7046,7024,7010,6981,6994,7016,7029,7020,6984,6954,6927,6902,6873,
	6939,6973,6997,7028,7062,7065,7046,7029,7000,7028,7052,7064,7054,7015,6982,6954,6930,6900,
	6937,6969,6997,7026,7062,7063,7042,7027,6999,7059,7086,7101,7088,7043,7008,6975,6953,6919,
	6835,6859,6876,6894,6913,6912,6900,6892,6876,6898,6908,6911,6895,6867,6846,6829,6816,6794,
	6867,6892,6915,6935,6962,6956,6944,6937,6916,6950,6963,6970,6949,6920,6894,6875,6856,6831,
	6877,6907,6929,6955,6984,6981,6965,6956,6937,7003,7020,7029,7012,6972,6939,6916,6898,6867,
	6934,6966,6996,7024,7060,7057,7038,7027,7006,7038,7055,7070,7048,7006,6975,6944,6924,6890,
	7008,7052,7093,7133,7183,7186,7151,7130,7097,7148,7180,7198,7173,7118,7072,7035,7002,6956,
#if TOUCH_KEY_NUM > 0
	6943,6929,
#endif /* #if TOUCH_KEY_NUM > 0 */
};

static int32_t PS_Config_Lmt_FW_Rawdata_P[40 * 40] = {
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
	1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,1300,
#if TOUCH_KEY_NUM > 0
	1300,1300,
#endif /* #if TOUCH_KEY_NUM > 0 */
};

static int32_t PS_Config_Lmt_FW_Rawdata_N[40 * 40] = {
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
	500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,
#if TOUCH_KEY_NUM > 0
	500,500,
#endif /* #if TOUCH_KEY_NUM > 0 */
};

static int32_t PS_Config_Lmt_FW_CC_P = 180;
static int32_t PS_Config_Lmt_FW_CC_N = 15;
static int32_t PS_Config_Lmt_Key_FW_CC_P = 210;
static int32_t PS_Config_Lmt_Key_FW_CC_N = 109;
static int32_t PS_Config_Lmt_FW_CC_I_P = 25;
static int32_t PS_Config_Lmt_FW_CC_I_N = 0;
static int32_t PS_Config_Lmt_FW_CC_Q_P = 25;
static int32_t PS_Config_Lmt_FW_CC_Q_N = 0;
static int32_t PS_Config_Lmt_Key_FW_CC_I_P = 25;
static int32_t PS_Config_Lmt_Key_FW_CC_I_N = 0;
static int32_t PS_Config_Lmt_Key_FW_CC_Q_P = 25;
static int32_t PS_Config_Lmt_Key_FW_CC_Q_N = 0;

static int32_t PS_Config_Lmt_FW_Diff_P = 60;
static int32_t PS_Config_Lmt_FW_Diff_N = -60;
static int32_t PS_Config_Lmt_Key_FW_Diff_P = 120;
static int32_t PS_Config_Lmt_Key_FW_Diff_N = -120;

static int32_t PS_Config_Diff_Test_Frame = 50;

#endif /* #if NVT_TOUCH_MP */
